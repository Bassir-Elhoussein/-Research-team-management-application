jQuery(document).ready(function(o){function t(o){return o.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#039;/g,"'")}o("#molongui-options").on("click","#activate_license_button",function(){event.preventDefault();var n=o(this),i=o("#key"),e=o("#product_id"),a=i.val().trim(),s=e.val().trim();if(!a||!s)return molongui_swal({icon:"error",title:molongui_common_options_params[201],text:molongui_common_options_params[202]}),!1;if(Math.floor(s)!=s||!o.isNumeric(s))return molongui_swal({icon:"error",title:molongui_common_options_params[216],text:molongui_common_options_params[217]}),!1;var m=o(this).html();o(this).html('<div class="m-typing-loader"></div>'),o.ajax({url:ajaxurl,type:"POST",data:{action:molongui_common_options_params.plugin_id+"_activate_license_key",nonce:molongui_common_options_params[200],key:a,pid:s},success:function(a){let s=o.parseJSON(a);console.log("%cMOLONGUI LICENSING SERVER RESPONSE\n%c"+t(s[0])+"\n%c"+t(s[1]),"font-weight: bold; text-decoration: underline;","text-transform: capitalize; color: red;",""),"success"===s[0]?molongui_swal({icon:"success",title:molongui_common_options_params[203],text:s[1]}).then(t=>{i.closest(".m-option").removeClass("m-license-off").addClass("m-license-on"),e.closest(".m-option").removeClass("m-license-off").addClass("m-license-on"),n.attr("id","deactivate_license_button").removeClass("is-primary").addClass("m-deactivate").html(molongui_common_options_params[215]),n.off("click"),o("#molongui-options").attr("style","opacity: 0.35"),o("#m-options-saving").fadeIn(),o(window).off("beforeunload"),location.reload(!0),window.location.assign(molongui_common_options_params.options_page)}):molongui_swal({icon:"error",title:molongui_common_options_params[204],content:{element:"span",attributes:{innerHTML:t(s[1])}}}).then(o=>{n.html(m),i.closest(".m-option").addClass("m-license-off"),e.closest(".m-option").addClass("m-license-off")}),o(this).html(o(this).prop("title"))},error:function(o,t,i){console.error(JSON.stringify(o)),console.error("AJAX Error: textStatus  = "+t),console.error("AJAX Error: errorThrown = "+i),molongui_swal(molongui_common_options_params[205],molongui_common_options_params[206],"error").then(o=>{n.html(m)})}})}),o("#molongui-options").on("click","#deactivate_license_button",function(){event.preventDefault();var t=o(this),n=o("#activation_key"),i=o("#activation_email"),e=o(this).html();o(this).html('<div class="m-typing-loader blue"></div>'),molongui_swal({icon:"info",title:molongui_common_options_params[207],text:molongui_common_options_params[208],closeOnEsc:!0,buttons:{cancel:{text:molongui_common_options_params[209],value:null,visible:!0,className:"",closeModal:!0},confirm:{text:molongui_common_options_params[210],value:!0,visible:!0,className:"",closeModal:!1}}}).then(a=>{a&&o.ajax({url:ajaxurl,type:"POST",data:{action:molongui_common_options_params.plugin_id+"_deactivate_license_key",nonce:molongui_common_options_params[200],form:o("form#molongui-settings-form").serializeArray()},success:function(a){console.log("MOLONGUI LICENSING SERVER RESPONSE: "+a.replace(/<\/?[^>]+>/gi,""));var s=o.parseJSON(a);"success"===s[0]?molongui_swal({icon:"success",title:molongui_common_options_params[211],text:s[1]}).then(e=>{n.val("").closest(".m-option").removeClass("m-license-on"),i.val("").closest(".m-option").removeClass("m-license-on"),t.attr("id","activate_license_button").removeClass("m-deactivate").addClass("is-primary").html(molongui_common_options_params[214]),t.off("click"),o("#molongui-options").attr("style","opacity: 0.35"),o("#m-options-saving").fadeIn(),o(window).off("beforeunload"),location.reload(!0),window.location.assign(molongui_common_options_params.options_page)}):molongui_swal({icon:"error",title:molongui_common_options_params[212],text:s[1]}).then(o=>{t.html(e)})},error:function(o,n,i){console.error(JSON.stringify(o)),console.error("AJAX Error: textStatus  = "+n),console.error("AJAX Error: errorThrown = "+i),molongui_swal(molongui_common_options_params[205],molongui_common_options_params[213],"error").then(o=>{t.html(e)})}})}),t.html(e)})}),jQuery(function(o){"use strict";o(".m-section-nav__mobile-header").on("click",function(){o(this).parent().toggleClass("is-open")}),o(".m-section-nav__panel").on("click",function(){o(this).parent().removeClass("is-open")}),o(".m-section-nav-tab__link").on("click",function(t){t.preventDefault();var n=o(this).attr("href");o(".m-section-nav-tab").removeClass("is-selected"),o(this).parent().addClass("is-selected"),o(".m-section-nav__mobile-header").html(o(this).find(".m-section-nav-tab__text").text()),o(".m-tab").removeClass("current"),o(n).addClass("current")}),o(".ui.dropdown").dropdown().dropdown({selector:{input:'> input[type="hidden"], > input[type="text"], > select'},message:{noResults:"<strong>No more options available.</strong>"}}),o(".m-support-info").popup({inline:!0,hoverable:!0,position:"left center",delay:{show:300,hide:600}}),o(".m-option.has-notice").on("change",function(t){o(this).closest(".m-option").find(".m-option-notice").show()}),o(".m-button-global.m-button-advanced").on("click",function(t){t.preventDefault(),o('[data-m-option="advanced"]').fadeToggle()}),o(".m-button-advanced").on("click",function(t){t.preventDefault(),this.blur();let n=o(this).data("m-state");"hidding"===n?(o(this).html("Hide Advanced"),o(this).data("m-state","showing"),n=0):(o(this).html("Show Advanced"),o(this).data("m-state","hidding"),n=1),o('[data-m-option="advanced"][data-m-group="'+o(this).data("m-target")+'"]').attr("data-m-hide",n),o('[data-m-option="advanced"][data-m-group="'+o(this).data("m-target")+'"][data-m-deps="1"]').fadeToggle().toggleClass("m-highlight")}),o(".m-unveil").on("click",function(t){var n=o(this);n.nextAll().toggleClass("hidden").promise().done(function(){n.next().is(":visible")?n.find("span").html(n.attr("data-hide")).toggleClass("close"):n.find("span").html(n.attr("data-show")).toggleClass("close")})}),o(".m-option input").on("change input",function(){o(this).closest(".m-card").prevAll(".m-card-header:first").find(".m-card-header__actions .m-button-save").prop("disabled",!1).addClass("is-primary")});var t=function(t=!1){t||(o("#molongui-options").attr("style","opacity: 0.35"),o("#m-options-saving").fadeIn());var n=function(){var t={};return o(".m-option input, .m-option textarea, .m-option select").each(function(){if(o(this).is("input[type=text]")||o(this).is("input[type=number]")||o(this).is("textarea")||o(this).is("input[type=hidden]")||o(this).is("select")){var n=o(this).val();o.isArray(n)&&(n=n.toString()),t[o(this).attr("id")]=n}else o(this).is("input[type=checkbox]:checked")?t[o(this).attr("id")]=1:o(this).is("input[type=checkbox]")?t[o(this).attr("id")]=null:o(this).is("input[type=radio]:checked")&&(t[o(this).attr("data-id")]=o(this).val())}),t}();jQuery.post(ajaxurl,{action:molongui_common_options_params.plugin_id+"_save_options",data:n,nonce:o("#mfw_save_options_nonce").val()},function(n){o("input, textarea").each(function(){o(this).attr("disabled","disabled")}),t||("false"!==n?(o("#m-options-saving").fadeOut(),o("#m-options-saved").fadeIn()):(o("#m-options-saving").fadeOut(),o("#m-options-error").fadeIn()),setTimeout(function(){o(window).off("beforeunload"),"false"!==n?(o("#m-options-saved").fadeOut(),o(".m-card-header__actions .m-button-save").blur().prop("disabled",!0).removeClass("is-primary")):o("#m-options-error").fadeOut(),o("input, textarea").each(function(){o(this).removeAttr("disabled")}),o("#molongui-options").removeAttr("style"),o(document).trigger("m_settings_saved")},1500))})};o(".m-button-save").on("click",function(o){o.preventDefault(),t(!1)}),o(document).on("keydown",function(o){return"s"!==o.key&&"S"!==o.key||!o.ctrlKey&&!o.metaKey||(o.preventDefault(),t(!1),!1)}),o("#export_options").on("click",function(t){t.preventDefault();var n=o(this),i=o(this).html();o(this).html('<div class="m-typing-loader blue"></div>'),jQuery.post(ajaxurl,{action:molongui_common_options_params.plugin_id+"_export_options",plugin:molongui_common_options_params.plugin_id},function(o){var t=new Blob([o],{type:"application/json"}),e=URL.createObjectURL(t);let a=(new Date).toISOString().slice(0,10),s=document.createElement("a");s.download="molongui-"+molongui_common_options_params.plugin_id+"-settings."+a+".json",s.href=e,document.body.appendChild(s),s.click(),document.body.removeChild(s),n.html(i)})}),o("#import_options").on("change",function(t){var n=t.target.files[0];if(void 0===n&&!n)return molongui_swal({icon:"error",title:molongui_common_options_params[112],text:molongui_common_options_params[113]}),!1;o(this);var i=o(this).next("label"),e=i.html();if(i.html('<div class="m-typing-loader blue"></div>'),"text/json"!==n.type&&"application/json"!==n.type)return molongui_swal({icon:"error",title:molongui_common_options_params[114],text:molongui_common_options_params[115]}).then(o=>{i.html(e)}),!1;var a,s,m,l;molongui_swal({icon:"info",title:molongui_common_options_params[116],text:molongui_common_options_params[117],closeOnEsc:!0,buttons:{cancel:{text:molongui_common_options_params[118],value:null,visible:!0,className:"",closeModal:!0},confirm:{text:molongui_common_options_params[119],value:!0,visible:!0,className:"",closeModal:!1}}}).then(t=>{t?(a=n,s=function(t){o.ajax({url:ajaxurl,type:"POST",data:{action:molongui_common_options_params.plugin_id+"_import_options",nonce:molongui_common_options_params[111],file:t,id:molongui_common_options_params.plugin_id,version:molongui_common_options_params.plugin_version},success:function(t){if(t){var n="";switch(t){case"file":n=molongui_common_options_params[123];break;case"plugin":n=molongui_common_options_params[124];break;case"update":n=molongui_common_options_params[125]}molongui_swal({icon:"error",title:molongui_common_options_params[122],text:n}).then(o=>{i.html(e)})}else molongui_swal({icon:"success",title:molongui_common_options_params[120],text:molongui_common_options_params[121]}).then(t=>{o(window).off("beforeunload"),location.reload()})},error:function(o,t,n){molongui_swal({icon:"error",title:molongui_common_options_params[122],text:molongui_common_options_params[130]}).then(o=>{i.html(e)})}})},m="",(l=new FileReader).onload=function(o){m=l.result,s(m)},l.readAsText(a)):i.html(e)}),t.preventDefault()}),o("#reset_options").on("click",function(t){if("0"===molongui_common_options_params.is_pro)return molongui_swal({icon:"error",title:molongui_common_options_params[1],text:molongui_common_options_params[2]}),!1;{var n=o(this),i=o(this).html();let t='<div class="m-typing-loader blue"></div>';o(this).html(t),molongui_swal({icon:"info",title:molongui_common_options_params[116],text:molongui_common_options_params[126],closeOnEsc:!0,buttons:{cancel:{text:molongui_common_options_params[118],value:null,visible:!0,className:"",closeModal:!0},confirm:{text:molongui_common_options_params[119],value:!0,visible:!0,className:"",closeModal:!1}}}).then(t=>{t?o.ajax({url:ajaxurl,type:"POST",data:{action:molongui_common_options_params.plugin_id+"_reset_options",nonce:molongui_common_options_params[127],id:molongui_common_options_params.plugin_id},success:function(t){t?molongui_swal({icon:"success",title:molongui_common_options_params[120],text:molongui_common_options_params[128]}).then(t=>{o(window).off("beforeunload"),location.reload()}):molongui_swal({icon:"error",title:molongui_common_options_params[122],text:molongui_common_options_params[129]}).then(o=>{n.html(i)})},error:function(o,t,e){molongui_swal({icon:"error",title:molongui_common_options_params[122],text:molongui_common_options_params[130]}).then(o=>{n.html(i)})}}):n.html(i)})}t.preventDefault()}),o("input, textarea, select").on("change",function(){o(window).on("beforeunload",function(o){return molongui_common_options_params[103]})})});